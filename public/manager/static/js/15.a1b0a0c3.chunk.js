(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{444:function(e,t,a){"use strict";a.r(t);var n=a(117),r=a(124),c=a(119),o=a(118),l=a(120),i=a(2),s=a(0),u=a.n(s),m=a(16),d=a.n(m),p=a(161),f=a(141),g=a(123),b=a(122),v=a(145),E=a(138),h=a(5),O=a(19),j=a.n(O),y=a(132),w=a(38),x=a(9),I=a(246),R=a(130),C=a(158),k=a(155),D=a(156),S=a(157),P=a(137),A=a(190),F=a(116),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=e.props,n=a.tagsListPageLoading,r=a.tagsListPageErrorMessage;return n(!0),Object(F.a)("/rss/"+t,"DELETE").then(function(){n(!1),e.setState({prepareDeleteRowID:0})}).catch(function(t){n(!1),r(t.message),e.setState({prepareDeleteRowID:0}),setTimeout(function(){r(t.message)},2600)})},L=function(e,t,a){return Object(F.a)("/rss/"+t,"PUT",a).then(function(){}).catch(function(e){})},_=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var a=e.state,n=a.direction,r=a.sort;e.setState({sort:t,direction:r!==t?"asc":"desc"===n?"asc":"desc"},function(){document.getElementById("rss-data-fetch-submit").click()})}}},B=a(18),T=a(17),M=function(e){return function(t){t.preventDefault();var a={page:1,limit:20,sort_direction:"desc",sort_column:"created_at"};for(var n in t.target.elements)t.target.elements[n].value&&(a=Object(i.a)({},a,Object(B.a)({},t.target.elements[n].name,t.target.elements[n].value)));Object(T.c)("RSS","rss",a),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.props,r=n.tagsListPageLoading;(0,n.tagsListPageSelectedRowsIDsArray)([]),r(!0),Object(F.a)("/rss","GET",e,t).then(function(e){var t=e.data,n=e.total,c=void 0===n?0:n;r(!1),a.setState({total:c,data:t})}).catch(function(e){var t=a.props.tagsListPageErrorMessage;t(e.message),setTimeout(function(){t("")},2600),r(!1)})}(a,"",e)}},V=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){a&&e.setState({page:t<1?1:t},function(){document.getElementById("rss-data-fetch-submit").click()})}}},G=function(e,t){return Object(F.a)("/rss/restore/"+t,"PUT").then(function(e){e.data,e.total}).catch(function(e){})},J=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state=Object(i.a)({},Object(i.a)({},Object(T.a)(),{limit:10,page:1}),{data:[],total:20,prepareDeleteRowID:0,prepareDeleteForeverRowID:0,currentEditRowIndex:-1,currentEditRowCreatedAt:null}),a.componentDidMount=function(){document.getElementById("rss-data-fetch-submit").click()},a.render=function(){var e=a.props.classes,t=a.state,n=t.data,r=void 0===n?[]:n,c=t.sort,o=void 0===c?"":c,l=t.direction,i=void 0===l?"":l,s=t.page,m=void 0===s?0:s,d=t.limit,p=void 0===d?20:d,f=t.total,E=void 0===f?0:f,h=(t.prepareDeleteRowID,t.currentEditRowIndex),O=(t.currentEditRowCreatedAt,t.prepareDeleteForeverRowID,a.props.persons&&a.props.persons.map(function(e){return[e.name,e.id]}));return u.a.createElement(R.a,{className:e.root},u.a.createElement(C.a,null,u.a.createElement(k.a,{columns:[u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{variant:"simple",text:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),u.a.createElement(g.a,{variant:"icon",text:u.a.createElement("span",{className:"person"===o&&"asc"===i?"fa fa-sort-up":"fa fa-sort-down"}),onClick:_(Object(y.a)(Object(y.a)(a)))("person"),className:"person"===o?"active":""})),u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{variant:"simple",text:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f"}),u.a.createElement(g.a,{variant:"icon",text:u.a.createElement("span",{className:"value"===o&&"asc"===i?"fa fa-sort-up":"fa fa-sort-down"}),onClick:_(Object(y.a)(Object(y.a)(a)))("value"),className:"value"===o?"active":""})),u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{variant:"simple",text:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438"}),u.a.createElement(g.a,{variant:"icon",text:u.a.createElement("span",{className:"pub_date"===o&&"asc"===i?"fa fa-sort-up":"fa fa-sort-down"}),onClick:_(Object(y.a)(Object(y.a)(a)))("pub_date"),className:"pub_date"===o?"active":""})),u.a.createElement(b.a,{variant:"simple",text:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]}),u.a.createElement("tbody",null,r.map(function(e,t){return u.a.createElement(D.a,{key:t,columns:[e.title,e.persons&&e.persons[0]&&e.persons[0].name,e.pub_date,u.a.createElement(u.a.Fragment,null,!e.is_visible&&u.a.createElement(g.a,{variant:"icon",text:u.a.createElement("i",{className:"fa fa-eye-slash"}),onClick:function(){return G(Object(y.a)(Object(y.a)(a)),e.id).then(function(){document.getElementById("rss-data-fetch-submit").click()})}}),e.is_visible&&u.a.createElement(g.a,{variant:"icon",text:u.a.createElement("i",{className:"fa fa-eye"}),onClick:function(){N(Object(y.a)(Object(y.a)(a)),e.id).then(function(){document.getElementById("rss-data-fetch-submit").click()})}}))]})}))),u.a.createElement("div",{className:e.pagePaginationButtons},u.a.createElement(S.a,{limit:p,total:E,page:m,onClick:V(Object(y.a)(Object(y.a)(a)))})),u.a.createElement(b.a,{text:"\u0417\u0430\u043f\u0438\u0441\u0438: ".concat((m-1)*p+1," - ").concat(m*p>E?E:m*p," \u0438\u0437 ").concat(E),className:e.pagePaginationInfo}),u.a.createElement("form",{id:"tags-data-fetch-form",onSubmit:M(Object(y.a)(Object(y.a)(a)))},u.a.createElement("button",{type:"submit",style:{display:"none"},id:"rss-data-fetch-submit"})),u.a.createElement("input",{type:"hidden",name:"sort_column",form:"tags-data-fetch-form",value:o}),u.a.createElement("input",{type:"hidden",name:"sort_direction",form:"tags-data-fetch-form",value:i}),u.a.createElement("input",{type:"hidden",name:"page",form:"tags-data-fetch-form",value:m}),u.a.createElement("input",{type:"hidden",name:"limit",form:"tags-data-fetch-form",value:p}),h>-1?u.a.createElement(v.a,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",onClose:function(){return a.setState({currentEditRowIndex:-1})},control:u.a.createElement(u.a.Fragment,null,u.a.createElement(g.a,{variant:"tab",text:"OK",onClick:function(e){L(Object(y.a)(Object(y.a)(a)),"tags-edit-form",r[h].id).then(function(){return document.getElementById("rss-data-fetch-submit").click()})}}),u.a.createElement(g.a,{variant:"tab",text:"\u041e\u0442\u043c\u0435\u043d\u0430",onClick:function(){return a.setState({currentEditRowIndex:-1})}}))},u.a.createElement("form",{id:"tags-edit-form"},u.a.createElement(b.a,{variant:"label",text:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430"}),u.a.createElement(A.a,{defaultValue:r[h].person_id,name:"person_id",options:O}),u.a.createElement(b.a,{variant:"label",text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430"}),u.a.createElement(P.a,{defaultValue:r[h].value,type:"text",name:"value"}))):"")},a}return Object(l.a)(t,e),t}(u.a.PureComponent),U=Object(w.b)(function(e){return{selectedRowsIdsArray:Object(p.d)(e)}},function(e){return{tagsListPageErrorMessage:Object(x.b)(I.a,e),tagsListPageSelectedRowsIDsArray:Object(x.b)(I.c,e),tagsListPageLoading:Object(x.b)(I.b,e)}})(d()(function(){return{root:{margin:12,gridArea:"tags-table","& table":{marginBottom:56}},pagePaginationButtons:{position:"absolute",bottom:12,left:12},pagePaginationInfo:{position:"absolute",bottom:12,right:12}}})(J)),H=a(129),K=a(135),q=a(146),z=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.persons;return e=e&&e.map(function(e){return[e.name,e.id]}),console.log(e),u.a.createElement("form",{id:"tags-add-form"},u.a.createElement(H.a,{variant:"label",text:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430"}),u.a.createElement(q.a,{name:"person_id",options:e}),u.a.createElement(H.a,{variant:"label",text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u044d\u0433\u0430"}),u.a.createElement(K.a,{type:"text",name:"value"}))}}]),t}(u.a.PureComponent),Q=d()(function(){return{}})(z),W=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={displayCopySeveralRows:!1,displayDeleteSeveralRows:!1,displayAlert:!1,currentAddRowCreatedAt:j()(),addNewItemFlag:!1,persons:[]},a.render=function(){var e=a.state,t=e.displayAlert,n=(e.displayDeleteSeveralRows,e.displayCopySeveralRows,e.addNewItemFlag),r=e.persons,c=a.props,o=(c.classes,c.selectedRowsIdsArray,c.catchedErrorMessage),l=(c.createdAtFilterValue,c.userListPageCreatedAt,c.dataLoadingFlag);return u.a.createElement(u.a.Fragment,null,l&&u.a.createElement(h.a,null),u.a.createElement(f.a,null),u.a.createElement(b.a,{text:"RSS \u043d\u043e\u0432\u043e\u0441\u0442\u0438",variant:"title"}),u.a.createElement(U,null),!0===n?u.a.createElement(v.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onClose:function(){return a.setState({addNewItemFlag:!1})},control:u.a.createElement(u.a.Fragment,null,u.a.createElement(g.a,{variant:"tab",text:"Cancel",onClick:function(){return a.setState({addNewItemFlag:!1})}}))},u.a.createElement(Q,{persons:r})):"",t?u.a.createElement(E.a,{text:o}):"")},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}}]),t}(u.a.PureComponent),X=d()(function(e){var t=e.Global;e.Palette;return{"@global":Object(i.a)({},t,{"#root":Object(i.a)({},t["#root"],{display:"grid",gridTemplateAreas:"\n\t\t\t\t'header header'\n\t\t\t\t'page-title control-elements'\n\t\t\t\t'tags-table tags-filters'\n\t\t\t",gridTemplateRows:"30px 50px auto",gridTemplateColumns:"auto 352px"})}),control:{lineHeight:"48px",gridArea:"control-elements","& button, & a":{margin:"0 18px 0 0"},"& .fa":{margin:"0 6px 0 0"}},title:{gridArea:"page-title"}}})(W);t.default=X}}]);
//# sourceMappingURL=15.a1b0a0c3.chunk.js.map